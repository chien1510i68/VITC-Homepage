# Internationalization (i18n) Guide

## Overview

This guide explains the internationalization structure for the VITC Homepage project. The system is currently Vietnamese-only but prepared for future multi-language support.

## Current Status

- **Active Locale:** Vietnamese (`vi`)
- **Prepared Locale:** English (`en`)
- **Infrastructure:** Ready for expansion to additional languages

## File Structure

```
lib/
  i18n.ts                 # Core i18n utilities and translations
config/
  site.config.ts          # Site-level language settings
app/
  [locale]/               # Future: Locale-based routing
    layout.tsx
    page.tsx
```

## Core Concepts

### Supported Locales

```typescript
import { locales, defaultLocale } from '@/lib/i18n';

// Supported: ['vi', 'en']
// Default: 'vi'
```

### Translation Structure

Translations are organized by domain:

```typescript
interface Translations {
  common: {        // General UI text
    home: string;
    about: string;
    // ...
  };
  navigation: {    // Navigation-specific
    skipToContent: string;
    mainMenu: string;
  };
  courses: {       // Course-related
    title: string;
    featured: string;
  };
  forms: {         // Form labels and validation
    name: string;
    email: string;
  };
  errors: {        // Error messages
    notFound: string;
    serverError: string;
  };
}
```

## Usage Examples

### Basic Translation

```typescript
import { getTranslation, createTranslator } from '@/lib/i18n';

// Direct translation
const homeText = getTranslation('vi', 'common.home');
// Returns: "Trang chủ"

// Create translator function
const t = createTranslator('vi');
const coursesText = t('common.courses');
// Returns: "Khóa học"
```

### In React Components

```tsx
'use client';

import { useTranslations } from '@/lib/i18n';

export default function MyComponent() {
  const t = useTranslations('vi');
  
  return (
    <div>
      <h1>{t('common.home')}</h1>
      <button>{t('common.register')}</button>
    </div>
  );
}
```

### Dynamic Content

```typescript
import { getTranslation } from '@/lib/i18n';

function generatePageTitle(locale: Locale, pageKey: string) {
  return `${getTranslation(locale, pageKey)} - VITC`;
}

// Example: "Khóa học - VITC"
const title = generatePageTitle('vi', 'common.courses');
```

## Formatting

### Numbers

```typescript
import { formatNumber } from '@/lib/i18n';

// Vietnamese format
formatNumber(1234567, 'vi');
// Returns: "1.234.567"

// English format
formatNumber(1234567, 'en');
// Returns: "1,234,567"

// With options
formatNumber(0.75, 'vi', { style: 'percent' });
// Returns: "75%"
```

### Currency

```typescript
import { formatCurrency } from '@/lib/i18n';

// Vietnamese (VND)
formatCurrency(5000000, 'vi');
// Returns: "₫5.000.000"

// English (USD)
formatCurrency(500, 'en');
// Returns: "$500.00"
```

### Dates

```typescript
import { formatDate } from '@/lib/i18n';

const date = new Date('2024-01-15');

// Vietnamese format (DD/MM/YYYY)
formatDate(date, 'vi');
// Returns: "15/01/2024"

// English format (MM/DD/YYYY)
formatDate(date, 'en');
// Returns: "01/15/2024"

// Custom format
formatDate(date, 'vi', { 
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
// Returns: "Thứ Hai, 15 tháng 1, 2024"
```

### Relative Time

```typescript
import { formatRelativeTime } from '@/lib/i18n';

const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000);

formatRelativeTime(yesterday, 'vi');
// Returns: "hôm qua"

formatRelativeTime(yesterday, 'en');
// Returns: "yesterday"
```

## Adding New Translations

### 1. Update Translation Interface

```typescript
// lib/i18n.ts
export interface Translations {
  // ... existing domains
  
  // Add new domain
  library: {
    title: string;
    categories: string;
    search: string;
  };
}
```

### 2. Add Vietnamese Translations

```typescript
export const vi: Translations = {
  // ... existing translations
  
  library: {
    title: 'Thư viện',
    categories: 'Danh mục',
    search: 'Tìm kiếm tài liệu',
  },
};
```

### 3. Add English Translations

```typescript
export const en: Translations = {
  // ... existing translations
  
  library: {
    title: 'Library',
    categories: 'Categories',
    search: 'Search documents',
  },
};
```

### 4. Use in Code

```typescript
const t = useTranslations('vi');
<h1>{t('library.title')}</h1>
```

## Future: Locale-Based Routing

When ready to enable multi-language support:

### 1. Update next.config.ts

```typescript
const nextConfig = {
  i18n: {
    locales: ['vi', 'en'],
    defaultLocale: 'vi',
    localeDetection: true,
  },
};
```

### 2. Create Locale-Based Routes

```
app/
  [locale]/
    layout.tsx
    page.tsx
    courses/
      page.tsx
    contact/
      page.tsx
```

### 3. Update Layout

```tsx
// app/[locale]/layout.tsx
import { locales } from '@/lib/i18n';

export async function generateStaticParams() {
  return locales.map((locale) => ({ locale }));
}

export default function LocaleLayout({
  children,
  params: { locale },
}: {
  children: React.ReactNode;
  params: { locale: Locale };
}) {
  return (
    <html lang={locale}>
      <body>{children}</body>
    </html>
  );
}
```

### 4. Language Switcher Component

```tsx
'use client';

import { usePathname, useRouter } from 'next/navigation';
import { locales, localeNames } from '@/lib/i18n';

export default function LanguageSwitcher() {
  const pathname = usePathname();
  const router = useRouter();
  
  const switchLocale = (newLocale: string) => {
    const segments = pathname.split('/');
    segments[1] = newLocale;
    router.push(segments.join('/'));
  };
  
  return (
    <select onChange={(e) => switchLocale(e.target.value)}>
      {locales.map((locale) => (
        <option key={locale} value={locale}>
          {localeNames[locale]}
        </option>
      ))}
    </select>
  );
}
```

## Environment Variables

Add to `.env.local`:

```env
# Default locale
NEXT_PUBLIC_DEFAULT_LOCALE=vi

# Enabled locales (comma-separated)
NEXT_PUBLIC_LOCALES=vi,en
```

## Best Practices

### 1. Never Hardcode Text

```tsx
// ❌ Bad
<button>Đăng ký</button>

// ✅ Good
<button>{t('common.register')}</button>
```

### 2. Use Semantic Keys

```typescript
// ❌ Bad
t('btn1')
t('text123')

// ✅ Good
t('forms.submit')
t('courses.register')
```

### 3. Keep Translations Flat

```typescript
// ❌ Too deeply nested
forms: {
  contact: {
    personal: {
      name: string;
    }
  }
}

// ✅ Better
forms: {
  contactName: string;
  contactEmail: string;
}
```

### 4. Handle Missing Translations

```typescript
function getTranslation(locale: Locale, key: string): string {
  // ... implementation
  
  if (value === undefined) {
    console.warn(`Translation key not found: ${key}`);
    return key; // Fallback to key itself
  }
  
  return value;
}
```

### 5. Pluralization

For complex pluralization, consider using a library like `i18next` or `format.js`:

```typescript
// Future enhancement
import { plural } from '@/lib/i18n/plural';

plural(count, {
  vi: {
    one: '1 khóa học',
    other: '{{count}} khóa học',
  },
  en: {
    one: '1 course',
    other: '{{count}} courses',
  },
});
```

## Testing

### Unit Tests

```typescript
import { getTranslation, formatCurrency } from '@/lib/i18n';

describe('i18n', () => {
  it('should translate Vietnamese correctly', () => {
    expect(getTranslation('vi', 'common.home')).toBe('Trang chủ');
  });
  
  it('should format Vietnamese currency', () => {
    expect(formatCurrency(1000000, 'vi')).toBe('₫1.000.000');
  });
});
```

### Manual Testing Checklist

- [ ] All UI text uses translation keys
- [ ] No hardcoded text in components
- [ ] Numbers formatted according to locale
- [ ] Dates formatted according to locale
- [ ] Currency displayed correctly
- [ ] Missing translations fall back gracefully
- [ ] Console warnings for missing keys (dev only)

## Migration Path

### Phase 1: Preparation (Current)
- ✅ Translation structure in place
- ✅ Utility functions created
- ✅ Vietnamese translations added
- ✅ English translations prepared

### Phase 2: Component Migration
- [ ] Identify all hardcoded text
- [ ] Add translation keys
- [ ] Update components to use `t()` function
- [ ] Test all pages

### Phase 3: Enable Multi-Language
- [ ] Update next.config.ts
- [ ] Implement locale routing
- [ ] Add language switcher
- [ ] Update SEO for multiple languages
- [ ] Test all locales

### Phase 4: Expansion
- [ ] Add more languages if needed
- [ ] Implement dynamic locale loading
- [ ] Add translation management system
- [ ] Professional translation review

## Resources

- [Next.js i18n Documentation](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
- [Intl API (MDN)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)
- [i18next (if needed)](https://www.i18next.com/)
- [Format.js](https://formatjs.io/)

## Maintenance

### Regular Tasks

- Review and update translations monthly
- Check for missing translation keys
- Ensure consistency across languages
- Update documentation when adding domains

### Quality Assurance

- Native speaker review for each language
- Context verification for translations
- Consistency checks across the application
- Accessibility testing for RTL languages (future)

Last updated: 2024-01-01
